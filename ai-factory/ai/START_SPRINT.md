SPRINT START PROTOCOL

**Three Execution Modes:**

## Mode 1: Full Project Planning (NEW - Default for New Projects)

**When to use:** Starting a NEW project - plan ALL sprints before development

**How it's activated:**
- Product Agent presents planning mode options to customer during project initialization
- Customer chooses FULL_PROJECT mode
- Product Agent sets `PLANNING_MODE: FULL_PROJECT` in `/ai/project.scope.md`
- Product Agent creates `/runs/SPRINT_PLAN.md` with `PLANNING_MODE: FULL_PROJECT`
- All agents read PLANNING_MODE from SPRINT_PLAN.md to determine behavior

**Execution Flow:**

1. **Product Agent - Full Sprint Planning:**
   - Reads `/ai/protocols/full_project_planning.md`
   - Analyzes ALL project requirements from root `/docs/` folder
   - Creates `/runs/SPRINT_PLAN.md` with complete sprint breakdown
   - For EACH planned sprint:
     - Creates sprint workspace (`runs/<SPRINT_ID>/`)
     - Creates `sprint.md` and `product.md`
   - **Output:** All sprint product.md files created

2. **Architect Agent - Full Architecture Planning:**
   - Reads `/runs/SPRINT_PLAN.md`
   - Creates `architecture.md` and `api/contract.md` for ALL sprints
   - Processes sprints in dependency order
   - **Output:** All sprint architecture files created

3. **Planner Agent - Full Task Planning:**
   - Reads `/runs/SPRINT_PLAN.md`
   - Creates `tasks/` for ALL sprints
   - Processes sprints in dependency order
   - **Output:** All sprint tasks created

4. **Customer Review and Approval:**
   - Review `/runs/SPRINT_PLAN.md`
   - Review all sprint plans
   - Approve or request adjustments

5. **Start Development (Only After Full Planning):**
   - Development starts with Sprint 001
   - **Update SPRINT_PLAN.md:** Mark Sprint 001 STATUS as IN_PROGRESS
   - Follow normal sprint execution flow (Mode 2 or Mode 3)
   - **Note:** Orchestrator Agent automatically updates STATUS. In manual mode, update SPRINT_PLAN.md manually when starting sprint execution.

**Benefits:**
- Complete project visibility from start
- All dependencies identified upfront
- Better resource planning
- No surprises during development
- Clear project roadmap

**Note:** This is the default mode for new projects. All planning must complete before code development begins.

## Mode 2: Orchestrated (Autonomous) - RECOMMENDED for Single Sprint

**Run Orchestrator Agent:**
```
Read ai-factory/ai/agents/orchestrator.md and execute.
```

Orchestrator Agent automatically:
1. Runs Product Agent (Initializes Sprint + Creates Product Requirements)
2. Runs Architect Agent
3. Runs Planner Agent
4. Runs Lead Dev Agent (Plan Review)
5. Executes Production Tasks (automatic task assignment)
6. Manages Dependency Engine (continuous)
7. Runs QA Agent
8. Runs Docs Agent
9. Updates dashboard continuously
10. Handles errors (automatic retry or manual intervention)

**Benefits:**
- Fully autonomous sprint execution
- Automatic task assignment
- Real-time dashboard
- Error handling
- No manual agent execution needed

**Note:** Use this mode for executing a single sprint after planning is complete.

## Mode 3: Manual Execution (Traditional)

**Use this mode for:**
- Executing a single sprint after planning is complete
- Adding features to existing projects
- Iterative development

**Execution Steps:**

1. Run Product Agent (Initializes Sprint + Creates Product Requirements)
   → Reads: `/ai/project.scope.md`, root `/docs/`, `/ai-factory/docs/`
   → Initializes: Creates `/runs/<SPRINT_ID>/` directory structure
   → Creates: `/runs/<SPRINT_ID>/sprint.md` (generated by agent based on docs)
   → Produces: `/runs/<SPRINT_ID>/product.md`
   → **Note:** Product Agent reads `/runs/SPRINT_PLAN.md` to check PLANNING_MODE:
     - If PLANNING_MODE: FULL_PROJECT → Plans all sprints (Mode 1)
     - If PLANNING_MODE: ITERATIVE → Plans only current sprint

2. Run Architect Agent
   → Reads: `/ai/project.scope.md`, `/runs/SPRINT_PLAN.md`, `/runs/<SPRINT_ID>/sprint.md`, `/runs/<SPRINT_ID>/product.md`
   → Produces: `/runs/<SPRINT_ID>/architecture.md`, `/runs/<SPRINT_ID>/api/contract.md` (if API project)
   → **Note:** Architect Agent reads PLANNING_MODE from `/runs/SPRINT_PLAN.md`:
     - If PLANNING_MODE: FULL_PROJECT → Creates architecture for all sprints (Mode 1)
     - If PLANNING_MODE: ITERATIVE → Creates architecture for current sprint only

3. Run Planner Agent
   → Reads: `/ai/project.scope.md`, `/runs/SPRINT_PLAN.md`, `/runs/<SPRINT_ID>/sprint.md`, `/runs/<SPRINT_ID>/product.md`, `/runs/<SPRINT_ID>/architecture.md`, `/runs/<SPRINT_ID>/api/contract.md`
   → Produces: `/runs/<SPRINT_ID>/tasks/` (backend/, frontend/, mobile/, ops/, ai-ml/)
   → **Note:** Planner Agent reads PLANNING_MODE from `/runs/SPRINT_PLAN.md`:
     - If PLANNING_MODE: FULL_PROJECT → Creates tasks for all sprints (Mode 1)
     - If PLANNING_MODE: ITERATIVE → Creates tasks for current sprint only

4. Run Lead Dev Agent (Plan Review Phase)
   → Reviews task structure
   → Validates dependencies
   → Fixes scope issues

5. Execute Production Tasks
   → Backend / Designer / Database / Frontend / Mobile / Test Dev / Security / OPS / AI_ML Agents
   → Custom Agents (if any, determined by Product Agent based on project requirements)
   → Each picks READY tasks
   → Marks DONE when complete
   → **Note:** Designer tasks typically complete before Frontend/Mobile tasks
   → **Note:** Database tasks typically complete before Backend tasks that need database
   → **Note:** Test Dev tasks typically complete after production code tasks
   → **Note:** Custom agents follow the same execution pattern as standard agents
   → **Git Integration:** If GIT: ACTIVE, agents create branches, commit, and create PRs

6. Dependency Engine (Continuous)
   → Monitors DONE tasks
   → Transitions dependent tasks to READY
   → Overseen by Lead Dev (Execution Review Phase) or Orchestrator Agent

7. Run QA Agent
   → Verifies acceptance criteria
   → Confirms DONE state

8. Run Docs Agent
   → Updates documentation
   → API / usage / README
   → Generates sprint_report.md

---

## SPRINT COMPLETION CRITERIA

A sprint is considered COMPLETE when ALL of the following are true:

1. **All Tasks Complete:**
   - All tasks have STATUS: DONE
   - No tasks with STATUS: TODO, IN_PROGRESS, or BLOCKED (unless explicitly deferred)

2. **QA Verification Passed:**
   - `/runs/<SPRINT_ID>/qa.md` exists
   - QA STATUS: PASSED
   - No blocking issues listed

3. **Documentation Complete:**
   - `/runs/<SPRINT_ID>/docs/` directory exists
   - All required documentation files created
   - `/runs/<SPRINT_ID>/sprint_report.md` generated

4. **Lead Dev Review Complete:**
   - All DONE tasks reviewed
   - No CHANGES_REQUIRED reviews pending

**If any criterion is not met, sprint is NOT complete.**

---

## DASHBOARD

If Orchestrator Agent is used:
- Dashboard is automatically created at `/runs/<SPRINT_ID>/dashboard.md`
- Dashboard is updated continuously during sprint execution
- Dashboard shows real-time status, task breakdown, agent activity, and more

For dashboard details, see: `ai/protocols/dashboard.md`
